<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheel Tracker Log Visualizer (Multi-CSV Support)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #0f172a;
            color: #f8fafc;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }

        /* Drop Zone */
        #drop-zone {
            border: 2px dashed #475569;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            background: #1e293b;
            color: #94a3b8;
            margin-bottom: 20px;
            transition: all 0.2s;
            cursor: pointer;
        }

        #drop-zone.dragover {
            border-color: #3b82f6;
            background: #1e293b80;
            color: #3b82f6;
        }

        #drop-zone:hover {
            border-color: #64748b;
            color: #cbd5e1;
        }

        .icon {
            font-size: 48px;
            margin-bottom: 10px;
            display: block;
        }

        /* File List */
        #file-list {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        #file-list.active {
            display: block;
        }

        .file-list-header {
            padding: 12px 16px;
            border-bottom: 1px solid #334155;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-item {
            padding: 10px 16px;
            border-bottom: 1px solid #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-icon {
            font-size: 1.2rem;
        }

        .file-name {
            font-weight: 500;
        }

        .file-count {
            color: #94a3b8;
            font-size: 0.85rem;
        }

        .file-remove {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .file-remove:hover {
            background: #ef444420;
        }

        /* Summary & Actions */
        #summary-bar {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            display: none;
            justify-content: space-between;
            align-items: center;
        }

        #summary-bar.active {
            display: flex;
        }

        .summary-text {
            font-size: 1.1rem;
        }

        .summary-text strong {
            color: #3b82f6;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #22c55e;
            color: white;
        }

        .btn-secondary:hover {
            background: #16a34a;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* Chart Styles */
        .chart-container {
            position: relative;
            overflow-x: auto;
            border: 1px solid #334155;
            background: #1e293b;
            border-radius: 8px;
            padding-bottom: 20px;
            display: none;
        }

        .chart-container.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .timeline-header {
            display: flex;
            height: 30px;
            border-bottom: 1px solid #334155;
            position: sticky;
            left: 0;
            min-width: 1200px;
        }

        .time-label {
            flex: 1;
            text-align: left;
            font-size: 0.75rem;
            color: #94a3b8;
            padding-left: 2px;
            border-left: 1px solid #334155;
            position: relative;
        }

        .line-row {
            display: flex;
            height: 60px;
            border-bottom: 1px solid #334155;
            position: relative;
            min-width: 1200px;
            border-top: 1px solid #334155;
        }

        .line-label {
            position: sticky;
            left: 0;
            width: 80px;
            background: #1e293b;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-right: 1px solid #334155;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            line-height: 1.2;
        }

        .line-track {
            flex: 1;
            position: relative;
        }

        .task-bar {
            position: absolute;
            top: 10px;
            bottom: 10px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-size: 0.7rem;
            color: white;
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s, z-index 0.1s;
            cursor: pointer;
        }

        .task-bar:hover {
            transform: scaleY(1.1);
            z-index: 5;
        }

        .task-bar-content {
            padding: 0 4px;
            overflow: hidden;
            text-overflow: ellipsis;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 100;
            border: 1px solid #475569;
            max-width: 300px;
        }

        /* Colors (Signal Tower Scheme) */
        .color-production {
            background: #22c55e;
        }

        .color-setup {
            background: #3b82f6;
        }

        .color-trouble {
            background: #ef4444;
        }

        .color-stop {
            background: #eab308;
            color: black;
        }

        .color-break {
            background: #94a3b8;
        }

        .color-other {
            background: #a855f7;
        }

        .legend {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            display: none;
        }

        .legend.active {
            display: flex;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
        }

        .legend-box {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .time-marker {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 1px;
            background: rgba(255, 255, 255, 0.1);
            pointer-events: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Wheel Tracker Log Visualizer</h1>

        <div id="drop-zone">
            <span class="icon">üìÇ</span>
            <p>„Åì„Åì„Å´CSV„Éï„Ç°„Ç§„É´„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó<br>„Åæ„Åü„ÅØ „ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû<br><small>(Ë§áÊï∞„Éï„Ç°„Ç§„É´ÂØæÂøú)</small></p>
            <input type="file" id="file-input" accept=".csv" multiple style="display: none;">
        </div>

        <div id="file-list">
            <div class="file-list-header">
                <span>üìÅ Ë™≠„ÅøËæº„Çì„Å†„Éï„Ç°„Ç§„É´</span>
                <button class="btn btn-danger" onclick="clearAllFiles()"
                    style="padding: 6px 12px; font-size: 0.8rem;">„Åô„Åπ„Å¶„ÇØ„É™„Ç¢</button>
            </div>
            <div id="file-items"></div>
        </div>

        <div id="summary-bar">
            <div class="summary-text">
                ÂêàË®à: <strong id="total-count">0</strong> ‰ª∂„ÅÆ„É≠„Ç∞
            </div>
            <div class="action-buttons">
                <select id="date-filter" class="btn"
                    style="background: #1e293b; color: white; border: 1px solid #475569; min-width: 160px;">
                    <option value="all">ÂÖ®„Å¶„ÅÆÊó•‰ªò</option>
                </select>
                <button class="btn btn-primary" onclick="showChart()">üìä „Ç¨„É≥„Éà„ÉÅ„É£„Éº„ÉàË°®Á§∫</button>
                <button class="btn btn-secondary" onclick="downloadMerged()">üì• „Éû„Éº„Ç∏„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
            </div>
        </div>

        <div id="legend" class="legend">
            <div class="legend-item">
                <div class="legend-box color-production"></div>ÁîüÁî£
            </div>
            <div class="legend-item">
                <div class="legend-box color-setup"></div>ÊÆµÂèñ„Çä (ÂàáÊõø/ÂßãÊ•≠ÁÇπÊ§ú)
            </div>
            <div class="legend-item">
                <div class="legend-box color-trouble"></div>„Éà„É©„Éñ„É´
            </div>
            <div class="legend-item">
                <div class="legend-box color-stop"></div>ÂÅúÊ≠¢ (‰∏ÄÊôÇÂÅúÊ≠¢/Ë®àÁîªÂÅúÊ≠¢)
            </div>
            <div class="legend-item">
                <div class="legend-box color-break"></div>‰ºëÊÜ©
            </div>
        </div>

        <div id="chart-container" class="chart-container">
            <div id="chart-mount"></div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const fileList = document.getElementById('file-list');
        const fileItems = document.getElementById('file-items');
        const summaryBar = document.getElementById('summary-bar');
        const chartContainer = document.getElementById('chart-container');
        const legend = document.getElementById('legend');

        // Store loaded files and their parsed data
        let loadedFiles = [];
        let allParsedLogs = [];

        // Drag & Drop Handlers
        dropZone.addEventListener('click', () => fileInput.click());

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            if (e.dataTransfer.files.length) {
                handleFiles(Array.from(e.dataTransfer.files));
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFiles(Array.from(e.target.files));
            }
        });

        function handleFiles(files) {
            const csvFiles = files.filter(f => f.name.endsWith('.csv'));
            if (csvFiles.length === 0) {
                alert('CSV„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }

            csvFiles.forEach(file => {
                // Check if file already loaded
                if (loadedFiles.some(f => f.name === file.name)) {
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const logs = parseCSV(e.target.result);
                    loadedFiles.push({
                        name: file.name,
                        logs: logs,
                        count: logs.length
                    });
                    updateUI();
                };
                reader.readAsText(file);
            });
        }

        function removeFile(fileName) {
            loadedFiles = loadedFiles.filter(f => f.name !== fileName);
            updateUI();
        }

        function clearAllFiles() {
            loadedFiles = [];
            allParsedLogs = [];
            updateUI();
            chartContainer.classList.remove('active');
            legend.classList.remove('active');
        }

        function updateUI() {
            // Update file list
            if (loadedFiles.length > 0) {
                fileList.classList.add('active');
                summaryBar.classList.add('active');

                fileItems.innerHTML = loadedFiles.map(f => `
                    <div class="file-item">
                        <div class="file-info">
                            <span class="file-icon">üìÑ</span>
                            <span class="file-name">${f.name}</span>
                            <span class="file-count">(${f.count}‰ª∂)</span>
                        </div>
                        <button class="file-remove" onclick="removeFile('${f.name}')">‚úï</button>
                    </div>
                `).join('');

                // Calculate total
                const total = loadedFiles.reduce((sum, f) => sum + f.count, 0);
                document.getElementById('total-count').textContent = total;

                // Merge all logs
                allParsedLogs = mergeAndSortLogs();

                // Update date filter dropdown
                updateDateFilter();
            } else {
                fileList.classList.remove('active');
                summaryBar.classList.remove('active');
                fileItems.innerHTML = '';
            }
        }

        function updateDateFilter() {
            const dateFilter = document.getElementById('date-filter');
            const dates = [...new Set(allParsedLogs.map(l => getLocalDateString(l.start)))].sort();

            dateFilter.innerHTML = '<option value="all">ÂÖ®„Å¶„ÅÆÊó•‰ªò (' + allParsedLogs.length + '‰ª∂)</option>';
            dates.forEach(date => {
                const count = allParsedLogs.filter(l => getLocalDateString(l.start) === date).length;
                const d = new Date(date + 'T00:00:00');
                const label = d.toLocaleDateString('ja-JP', { month: 'numeric', day: 'numeric', weekday: 'short' });
                dateFilter.innerHTML += `<option value="${date}">${label} (${count}‰ª∂)</option>`;
            });
        }

        // Get local date string (YYYY-MM-DD) from Date object
        function getLocalDateString(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function mergeAndSortLogs() {
            const allLogs = loadedFiles.flatMap(f => f.logs);

            // Remove duplicates (same start time and task)
            const seen = new Set();
            const unique = allLogs.filter(log => {
                const key = `${log.start.getTime()}-${log.task}-${log.id}`;
                if (seen.has(key)) return false;
                seen.add(key);
                return true;
            });

            // Sort by start time
            return unique.sort((a, b) => a.start - b.start);
        }

        function showChart() {
            if (allParsedLogs.length === 0) {
                alert('„É≠„Ç∞„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');
                return;
            }

            // Filter by selected date
            const dateFilter = document.getElementById('date-filter').value;
            let filteredLogs = allParsedLogs;

            if (dateFilter !== 'all') {
                filteredLogs = allParsedLogs.filter(l => getLocalDateString(l.start) === dateFilter);
            }

            if (filteredLogs.length === 0) {
                alert('ÈÅ∏Êäû„Åó„ÅüÊó•‰ªò„ÅÆ„É≠„Ç∞„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');
                return;
            }

            renderChart(filteredLogs);
        }

        function downloadMerged() {
            if (allParsedLogs.length === 0) {
                alert('„É≠„Ç∞„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');
                return;
            }

            const header = ['„É©„Ç§„É≥ID', '„É©„Ç§„É≥Âêç', '„Çø„Çπ„ÇØ', 'ÈñãÂßãÊó•ÊôÇ', 'ÁµÇ‰∫ÜÊó•ÊôÇ', 'ÊâÄË¶ÅÊôÇÈñì(Áßí)', '„É°„É¢'];
            const rows = allParsedLogs.map(l => {
                const dur = Math.round((l.end - l.start) / 1000);
                const esc = (s) => `"${String(s || '').replace(/"/g, '""')}"`;
                const formatDate = (d) => d.toLocaleString('ja-JP');
                return [l.id, esc(l.name), esc(l.task), esc(formatDate(l.start)), esc(formatDate(l.end)), dur, esc(l.memo)].join(',');
            });

            const blob = new Blob([[header.join(','), ...rows].join('\n')], { type: 'text/csv;charset=utf-8;' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);

            // Generate filename with date range
            const firstDate = allParsedLogs[0].start.toISOString().slice(0, 10);
            const lastDate = allParsedLogs[allParsedLogs.length - 1].start.toISOString().slice(0, 10);
            const fileName = firstDate === lastDate
                ? `timelogs_merged_${firstDate}.csv`
                : `timelogs_merged_${firstDate}_to_${lastDate}.csv`;

            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const data = [];

            const splitCSVLine = (line) => {
                const res = [];
                let inQuote = false;
                let p = 0;
                for (let i = 0; i < line.length; i++) {
                    if (line[i] === '"') inQuote = !inQuote;
                    if (line[i] === ',' && !inQuote) {
                        res.push(line.substring(p, i).replace(/^"|"$/g, '').replace(/""/g, '"'));
                        p = i + 1;
                    }
                }
                res.push(line.substring(p).replace(/^"|"$/g, '').replace(/""/g, '"'));
                return res;
            };

            if (lines.length < 2) return data;

            // Parse Header
            const headers = splitCSVLine(lines[0]);
            const map = {
                id: -1,
                name: -1,
                task: -1,
                start: -1,
                end: -1,
                duration: -1,
                memo: -1
            };

            headers.forEach((h, i) => {
                const header = h.trim();
                if (header === 'ID' || header === 'id' || header === '„É©„Ç§„É≥ID') map.id = i;
                if (header === '„É©„Ç§„É≥Âêç' || header === 'name' || header === 'Name') map.name = i;
                if (header === '„Çø„Çπ„ÇØ' || header === 'task' || header === 'Task') map.task = i;
                if (header === 'ÈñãÂßãÊó•ÊôÇ' || header === 'start' || header === 'Start') map.start = i;
                if (header === 'ÁµÇ‰∫ÜÊó•ÊôÇ' || header === 'end' || header === 'End') map.end = i;
                if (header.includes('ÊâÄË¶ÅÊôÇÈñì') || header === 'duration') map.duration = i;
                if (header === '„É°„É¢' || header === 'memo') map.memo = i;
            });

            // Fallback for ID if not found: use Name
            if (map.id === -1 && map.name !== -1) {
                map.id = map.name;
            }

            // Validation: Ensure minimum required columns exist
            if (map.start === -1 || map.end === -1) {
                console.warn("Required columns (Start/End) not found in header.");
                if (map.start === -1) {
                    map.id = 0;
                    map.name = 1;
                    map.task = 2;
                    map.start = 3;
                    map.end = 4;
                    map.duration = 5;
                    map.memo = 6;
                }
            }

            for (let i = 1; i < lines.length; i++) {
                const row = splitCSVLine(lines[i]);
                if (row.length < 3) continue;

                const getValue = (index) => index !== -1 && index < row.length ? row[index] : "";

                const startStr = getValue(map.start);
                const endStr = getValue(map.end);

                if (!startStr || !endStr) continue;

                const start = new Date(startStr);
                const end = new Date(endStr);

                if (isNaN(start.getTime()) || isNaN(end.getTime())) continue;

                data.push({
                    id: getValue(map.id) || "Unknown",
                    name: getValue(map.name) || getValue(map.id) || "Unknown",
                    task: getValue(map.task) || "Task",
                    start: start,
                    end: end,
                    duration: parseInt(getValue(map.duration)) || 0,
                    memo: getValue(map.memo) || ""
                });
            }
            return data;
        }

        function getTaskClass(taskName) {
            if (!taskName) return "color-other";
            if (taskName.includes("ÁîüÁî£") || taskName.includes("Á®ºÂÉç")) return "color-production";
            if (taskName.includes("ÊÆµÂèñ„Çä") || taskName.includes("ÂàáÊõø") || taskName.includes("ÂßãÊ•≠ÁÇπÊ§ú") || taskName.includes("Á´ã„Å°‰∏ä„Åí") || taskName.includes("Á´ã„Å°‰∏ã„Åí")) return "color-setup";
            if (taskName.includes("„Éà„É©„Éñ„É´") || taskName.includes("Áï∞Â∏∏")) return "color-trouble";
            if (taskName.includes("ÂÅúÊ≠¢") || taskName.includes("‰∏ÄÊôÇÂÅúÊ≠¢") || taskName.includes("ÂæÖÊ©ü")) return "color-stop";
            if (taskName.includes("‰ºëÊÜ©")) return "color-break";
            return "color-other";
        }

        function renderChart(logs) {
            if (logs.length === 0) {
                alert('ÊúâÂäπ„Å™„É≠„Ç∞„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü');
                return;
            }

            // --- Config ---
            const startBound = new Date(logs[0].start);
            startBound.setMinutes(0, 0, 0);

            const endBound = new Date(logs[logs.length - 1].end);
            endBound.setMinutes(0, 0, 0);
            endBound.setHours(endBound.getHours() + 1);

            const totalDuration = endBound - startBound;
            const getPosition = (date) => ((date - startBound) / totalDuration) * 100;

            // --- Clear Previous ---
            const mount = document.getElementById('chart-mount');
            mount.innerHTML = '';
            chartContainer.classList.add('active');
            legend.classList.add('active');

            // --- Render Header ---
            const header = document.createElement('div');
            header.className = 'timeline-header';
            const hourSpan = 1000 * 60 * 60;
            for (let t = startBound.getTime(); t < endBound.getTime(); t += hourSpan) {
                const d = new Date(t);
                const div = document.createElement('div');
                div.className = 'time-label';
                div.innerText = `${d.getHours()}:00`;
                header.appendChild(div);
            }
            mount.appendChild(header);

            // --- Render Rows ---
            const lines = [...new Set(logs.map(l => l.id))].sort();

            lines.forEach(lineId => {
                const lineLogs = logs.filter(l => l.id === lineId);
                const lineName = lineLogs.length > 0 && lineLogs[0].name ? lineLogs[0].name : `LINE ${lineId}`;
                const row = document.createElement('div');
                row.className = 'line-row';

                const label = document.createElement('div');
                label.className = 'line-label';
                label.innerText = lineName;
                row.appendChild(label);

                const track = document.createElement('div');
                track.className = 'line-track';

                // Hour Markers
                for (let t = startBound.getTime(); t < endBound.getTime(); t += hourSpan) {
                    const marker = document.createElement('div');
                    marker.className = 'time-marker';
                    marker.style.left = `${((t - startBound) / totalDuration) * 100}%`;
                    track.appendChild(marker);
                }

                lineLogs.forEach(log => {
                    const left = getPosition(log.start);
                    const width = getPosition(log.end) - left;
                    if (width < 0.05) return;

                    const bar = document.createElement('div');
                    bar.className = `task-bar ${getTaskClass(log.task)}`;
                    bar.style.left = `${left}%`;
                    bar.style.width = `${width}%`;

                    const content = document.createElement('div');
                    content.className = 'task-bar-content';
                    content.innerText = log.task.split('>').pop().trim();
                    bar.appendChild(content);

                    // Tooltip
                    bar.addEventListener('mousemove', (e) => {
                        const tt = document.getElementById('tooltip');
                        tt.style.opacity = 1;
                        tt.style.left = `${e.clientX + 10}px`;
                        tt.style.top = `${e.clientY + 10}px`;
                        tt.innerHTML = `
                        <strong>${log.task}</strong><br>
                        ${log.start.toLocaleTimeString()} - ${log.end.toLocaleTimeString()}<br>
                        ÊâÄË¶ÅÊôÇÈñì: ${Math.round(log.duration / 60)}ÂàÜ<br>
                        ${log.memo ? `üìù ${log.memo}` : ''}
                    `;
                    });
                    bar.addEventListener('mouseleave', () => {
                        document.getElementById('tooltip').style.opacity = 0;
                    });

                    track.appendChild(bar);
                });

                row.appendChild(track);
                mount.appendChild(row);
            });

            // Update title
            const firstDate = logs[0].start.toLocaleDateString('ja-JP');
            const lastDate = logs[logs.length - 1].start.toLocaleDateString('ja-JP');
            const title = firstDate === lastDate
                ? `ÁîüÁî£„É≠„Ç∞: ${firstDate}`
                : `ÁîüÁî£„É≠„Ç∞: ${firstDate} „Äú ${lastDate}`;
            document.querySelector('h1').innerText = title;
        }
    </script>
</body>

</html>